---
import { getCollection } from "astro:content";
import Artwork from "../components/Artwork.astro";
import Layout from "../layouts/Base.astro";

const collectionId = "xiiv68slmth2wzb3o1fj4rzw";
const collection = (await getCollection("collections")).find(
  (item) => item.id === collectionId,
);
if (!collection) throw `unknown collection id "${collectionId}"`;

const artworkIds = new Set(collection.data.artworkIds);
const artwork = (await getCollection("artwork")).filter((item) =>
  artworkIds.has(item.id),
);
---

<Layout>
  <header></header>
  <main>
    <div class="artwork">
      {
        artwork.map((item) => (
          <figure>
            <Artwork artwork={item} />
            <figcaption>{item.data.title}</figcaption>
          </figure>
        ))
      }
    </div>
  </main>
  <footer></footer>
</Layout>

<style>
  .artwork {
    display: grid;
    gap: var(--size-fluid-1);
    grid-template-columns: 100%;
    @media (width >= 768px) {
      grid-template-columns: 1fr 1fr 1fr;
    }
  }

  figure {
    display: grid;
    grid-template-areas: stack;
    margin: 0;
    > * {
      grid-area: stack;
    }
    figcaption {
      font-family: var(--font-geometric-humanist);
      font-size: var(--font-size-2);
      padding: var(--size-fluid-1);
      text-transform: uppercase;
    }
  }
</style>
